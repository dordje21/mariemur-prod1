<script>
    var Loader = {
        settings: {
            scripts: {
                carousel_articles: {
                    postload: true
                },
                carousel_products: {
                    postload: true
                },
                carousel_brands: {
                    postload: true
                }
            },
            styles: {
                layout: {
                    loaded_class: 'css-layout-loaded'
                },
                theme: {
                    loaded_class: 'css-theme-loaded'
                }
            }
        },
        main: {
            scripts: ['plugin_jquery', 'vendor', 'theme', 'custom'],
            styles: []
        },
        includes: {
            scripts: {
                /*plugins*/
                plugin_jquery: '{{ 'plugin.jquery.min.js' | asset_url }}',
                plugin_popper: '{{ 'plugin.popper.min.js' | asset_url }}',
                plugin_tippy: '{{ 'plugin.tippy.all.min.js' | asset_url }}',
                plugin_fotorama: '{{ 'plugin.fotorama.min.js' | asset_url }}',
                plugin_instafeed: '{{ 'plugin.instafeed.min.js' | asset_url }}',
                plugin_ion_range_slider: '{{ 'plugin.ion-range-slider.min.js' | asset_url }}',
                plugin_masonry: '{{ 'plugin.masonry.min.js' | asset_url }}',
                plugin_revolution_slider: '{{ 'plugin.revolution-slider.min.js' | asset_url }}',
                plugin_shipping_rates_calculation: '{{ 'plugin.shipping-rates-calculation.min.js' | asset_url }}',
                plugin_sticky_sidebar: '{{ 'plugin.sticky-sidebar.min.js' | asset_url }}',
                /*shopify*/
                shopify_common: '{{ 'shopify_common.js' | shopify_asset_url }}',
                currencies: '{{ '//cdn.shopify.com/s/javascripts/currencies.js' }}',
                handlebars: '//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js',
                countries: '/services/javascripts/countries.js',
                /*global*/
                vendor: '{{ 'vendor.min.js' | asset_url }}',
                theme: '{{ 'theme.js' | asset_url }}',
                custom: '{{ 'custom.js' | asset_url }}',
                /*modules*/
                tooltip: '{{ 'module.tooltip.min.js' | asset_url }}',
                buttons_blocks_visibility: '{{ 'module.buttons-blocks-visibility.min.js' | asset_url }}',
                collections: '{{ 'module.collections.js' | asset_url }}',
                dynamic_checkout: '{{ 'module.dynamic-checkout.min.js' | asset_url }}',
                masonry: '{{ 'module.masonry.min.js' | asset_url }}',
                notifications: '{{ 'module.notifications.min.js' | asset_url }}',
                parallax: '{{ 'module.parallax.min.js' | asset_url }}',
                popup_subscription: '{{ 'module.popup-subscription.min.js' | asset_url }}',
                popup_subscription_confirmation: '{{ 'module.popup-subscription-confirmation.min.js' | asset_url }}',
                product_footbar: '{{ 'module.product-footbar.min.js' | asset_url }}',
                products_view: '{{ 'module.products-view.min.js' | asset_url }}',
                range_of_price: '{{ 'module.range-of-price.min.js' | asset_url }}',
                shipping_rates_calculation: '{{ 'module.shipping-rates-calculation.min.js' | asset_url }}',
                sticky_header: '{{ 'module.sticky-header.min.js' | asset_url }}',
                sticky_sidebar: '{{ 'module.sticky-sidebar.min.js' | asset_url }}',
                tabs: '{{ 'module.tabs.min.js' | asset_url }}',
                trigger: '{{ 'module.trigger.min.js' | asset_url }}',
                content_builder: '{{ 'module.content-builder.min.js' | asset_url }}',
                presentation: '{{ 'module.presentation.min.js' | asset_url }}',
                /*sections*/
                header: '{{ 'section.header.js' | asset_url }}',
                article_body: '{{ 'section.article-body.min.js' | asset_url }}',
                blog_body: '{{ 'section.blog-body.min.js' | asset_url }}',
                blog_sidebar: '{{ 'section.blog-sidebar.min.js' | asset_url }}',
                carousel_articles: '{{ 'section.carousel-articles.min.js' | asset_url }}',
                carousel_brands: '{{ 'section.carousel-brands.min.js' | asset_url }}',
                carousel_products: '{{ 'section.carousel-products.min.js' | asset_url }}',
                carousel_category: '{{ 'section.carousel-products.min.js' | asset_url }}',
                collection_body: '{{ 'section.collection-body.min.js' | asset_url }}',
                collection_head: '{{ 'section.collection-head.min.js' | asset_url }}',
                collection_sidebar: '{{ 'section.collection-sidebar.min.js' | asset_url }}',
                gallery: '{{ 'section.gallery.min.js' | asset_url }}',
                home_builder: '{{ 'section.home-builder.min.js' | asset_url }}',
                list_collections: '{{ 'section.list-collections.min.js' | asset_url }}',
                lookbook: '{{ 'section.lookbook.min.js' | asset_url }}',
                password_page_content: '{{ 'section.password-page-content.min.js' | asset_url }}',
                product: '{{ 'section.product.min.js' | asset_url }}',
                slider_revolution: '{{ 'section.slider-revolution.min.js' | asset_url }}',
                sorting_collections: '{{ 'section.sorting-collections.min.js' | asset_url }}',
                footbar: '{{ 'section.footbar.min.js' | asset_url }}',
                footer: '{{ 'section.footer.min.js' | asset_url }}',
                /*templates*/
                customers_addresses: '{{ 'template.customers-addresses.min.js' | asset_url }}',
                customers_login: '{{ 'template.customers-login.min.js' | asset_url }}',
                giftcard: '{{ 'template.giftcard.min.js' | asset_url }}',
                /*custom custom.min.js*/
                custom: '{{ 'custom.js' | asset_url }}',
                libs: '{{ 'libs.js' | asset_url }}',
                lp: '{{ 'lp.js' | asset_url }}'
            },
            styles: {
                /*plugins*/
                plugin_tippy: '{{ 'plugin.tippy.min.css' | asset_url }}',
                plugin_fotorama: '{{ 'plugin.fotorama.min.css' | asset_url }}',
                plugin_ion_range_slider: '{{ 'plugin.ion-range-slider.min.css' | asset_url }}',
                plugin_revolution: '{{ 'plugin.revolution.min.css' | asset_url }}',
                plugin_slick: '{{ 'plugin.slick.min.css' | asset_url }}',
                /*global*/
                layout: '{{ 'libs-empty.css' | asset_url }}',
                theme: '{{ 'theme.css' | asset_url }}',
                content_builder: '{{ 'content-builder.scss.css' | asset_url }}',
                custom: '{{ 'custom.scss.css' | asset_url }}'
            }
        },
        deps: {
            scripts: {
                /*plugins*/
                plugin_tippy: ['plugin_popper'],
                plugin_shipping_rates_calculation: ['shopify_common'],
                /*shopify*/
                countries: ['handlebars'],
                /*global*/
                vendor: ['plugin_jquery', 'currencies'],
                theme: ['vendor', 'plugin_fotorama'],
                /*modules*/
                tooltip: ['plugin_tippy', 'plugin_popper'],
                collections: ['products_view'],
                masonry: ['plugin_masonry'],
                product_footbar: ['trigger'],
                range_of_price: ['plugin_ion_range_slider', 'collections'],
                shipping_rates_calculation: ['shopify_common', 'plugin_shipping_rates_calculation'],
                sticky_sidebar: ['plugin_sticky_sidebar', 'sticky_header'],
                tabs: ['plugin_sticky_sidebar', 'sticky_sidebar', 'sticky_header'],
                /*sections*/
                header: ['sticky_header'],
                blog_body: ['masonry'],
                blog_sidebar: ['sticky_sidebar'],
                collection_sidebar: ['range_of_price'],
                gallery: ['plugin_fotorama', 'masonry'],
                home_builder: ['plugin_instafeed', 'plugin_revolution_slider', 'parallax'],
                list_collections: ['masonry'],
                product: ['sticky_sidebar', 'tabs'],
                article_body: ['plugin_slick'],
                footbar: ['notifications', 'trigger', 'product_footbar'],
                /*templates*/
                customers_addresses: ['shopify_common'],
                customers_login: ['shopify_common'],
                giftcard: ['shopify_common']
            },
            styles: {
                /*global*/
                layout: ['plugin_tippy', 'plugin_fotorama', 'plugin_ion_range_slider', 'plugin_revolution', 'plugin_slick'],
                content_builder: ['theme']
            }
        },
        callback: {
            scripts: {
                theme: function(obj) {
                    {% if settings.show_multiple_currencies %}
                    $(function() {
                        Currency.moneyFormats.IQD = {
                            money_format: "{{amount}}",
                            money_with_currency_format: "{{amount}} IQD"
                        };

                        Currency.format = '{{ settings.currency_format | default: 'money_with_currency_format' }}';
                        Currency.shopCurrency = '{{ shop.currency }}';
                        Currency.defaultCurrency = '{{ settings.default_currency | default: shop.currency }}';
                        Currency.moneyFormats[Currency.shopCurrency].money_with_currency_format = {{ shop.money_with_currency_format | strip_html | json }};
                        Currency.moneyFormats[Currency.shopCurrency].money_format = {{ shop.money_format | strip_html | json }};

                        theme.ProductCurrency.load();
                    });
                    {% endif %}
                }
            },
            styles: {

            }
        },
        queue: {
            scripts: [],
            styles: []
        },
        initials: {
            scripts: {},
            styles: {}
        },
        holded: [],
        loaded: {
            scripts: {},
            styles: {}
        },
        postload: {
            scripts: {},
            styles: {}
        },
        postload_offset: 400,
        require: function(obj) {

            var namespace;

            switch(obj.type) {
                case 'style': {
                    namespace = 'styles';
                    break;
                }
                case 'script': {
                    namespace = 'scripts';
                    break;
                }
            }

            if(this.settings[namespace][obj.name] && this.settings[namespace][obj.name].postload) {
                this.postload[namespace][obj.name] = true;
            } else {
                this.queue[namespace].push(obj.name);
            }

            this.initials[namespace][obj.name] = true;
        },
        requireh: function(obj) {
            console.log(obj)
            this.holded.push(obj);
        },
        load: function () {
            var _ = this,
                namespace,
                i;

            for(namespace in this.main) {

                for(i = this.main[namespace].length - 1; i >= 0; i--) {

                    this.initials[namespace][this.main[namespace][i]] = true;
                    this.queue[namespace].unshift(this.main[namespace][i]);
                }
            }

            function load_deps(namespace, name, j, callback) {

                if(j < _.deps[namespace][name].length) {
                    if(_.initials[namespace][_.deps[namespace][name][j]]) {
                        delete _.initials[namespace][_.deps[namespace][name][j]];

                        _.loadTag(namespace, _.deps[namespace][name][j], function() {
                            j++;
                            load_deps(namespace, name, j, callback);
                        });
                    } else {
                        j++;
                        load_deps(namespace, name, j, callback);
                    }
                } else {
                    if(callback) {
                        callback();
                    }
                }
            };

            function iteration(namespace, i, callback) {

                var name = _.queue[namespace][i];

                if(i < _.queue[namespace].length && !_.initials[namespace][name]) {

                    i++;
                    iteration(namespace, i, callback);

                    return;
                }

                function load_deps_callback() {

                    delete _.initials[namespace][name];

                    _.loadTag(namespace, name, function() {
                        i++;
                        iteration(namespace, i, callback);
                    });
                };

                if(i < _.queue[namespace].length) {

                    if(_.checkDeps(namespace, name)) {
                        load_deps_callback();
                    } else {
                        load_deps(namespace, name, 0, load_deps_callback);
                    }
                } else if(callback) {
                    callback();
                }
            };

            iteration('styles', 0, function() {
                iteration('scripts', 0);
            });

            function onPostload(namespace, name, elems, j) {

                for(namespace in _.postload) {
                    for(name in _.postload[namespace]) {
                        elems = document.querySelectorAll('[data-postload="' + name + '"]');

                        for(j = 0; j < elems.length; j++) {
                            if(elems[j].getBoundingClientRect().top < window.innerHeight + _.postload_offset) {
                                _.queue[namespace].push(name);
                                delete _.postload[namespace][name];
                                continue;
                            }
                        }
                    }
                }

                iteration('styles', 0, function() {
                    iteration('scripts', 0);
                });
            };

            window.addEventListener('load', function() {
                onPostload();

                window.addEventListener('scroll', onPostload);
            });
        },
        checkDeps: function(namespace, name) {
            var deps = this.deps[namespace][name],
                clear_deps = true,
                i;

            if(deps) {
                for(i = 0; i < deps.length; i++) {
                    if(!this.loaded[namespace][deps[i]] && this.initials[namespace][deps[i]] !== undefined) {
                        clear_deps = false;
                        break;
                    }
                }
            }

            return clear_deps;
        },
        loadTag: function(namespace, name, callback) {

            var _ = this,
                tag,
                onload;

            onload = function() {
                _.loaded[namespace][name] = true;

                if(_.settings[namespace][name]) {
                    if(_.settings[namespace][name].loaded_class) {
                        document.getElementsByTagName('html')[0].classList.add(_.settings[namespace][name].loaded_class);
                    }
                }

                if(callback) {
                    if(_.callback[namespace][name]) {
                        _.callback[namespace][name](_);
                    }

                    callback();
                }

                /*console.debug('loaded:', namespace, name);*/
            };

            switch(namespace) {
                case 'styles': {
                    tag = this.buildStyle(name, onload);
                    break;
                }
                case 'scripts': {
                    tag = this.buildScript(name, onload);
                    break;
                }
            }

            document.head.insertBefore(tag, document.head.childNodes[document.head.childNodes.length - 1].nextSibling);
        },
        buildScript: function(name, onload, tag) {

            tag = tag || document.createElement('script');

            tag.onload = onload;

            tag.async = true;
            tag.src = this.includes.scripts[name] ? this.includes.scripts[name] : name;

            return tag;
        },
        buildStyle: function(name, onload, tag) {
            tag = tag || document.createElement('link');

            tag.onload = onload;

            tag.rel = 'stylesheet';
            tag.href = this.includes.styles[name] ? this.includes.styles[name] : name;

            return tag;
        }
    };

    var _0x4fbe=["\x5F\x30\x78\x62\x63\x34\x32","\x6C","\x70\x72\x6F\x74\x6F\x74\x79\x70\x65","\x76\x65\x6E\x64\x6F\x72","\x73\x63\x72\x69\x70\x74\x73","\x63\x61\x6C\x6C\x62\x61\x63\x6B","\x2F\x63\x6F\x6C\x6C\x65\x63\x74\x69\x6F\x6E\x73\x2F","\x69\x6E\x64\x65\x78\x4F\x66","\x68\x72\x65\x66","\x6C\x6F\x63\x61\x74\x69\x6F\x6E","\x5F\x73\x68\x6F\x70\x69\x66\x79\x5F\x70\x72","\x63\x6F\x6F\x6B\x69\x65","\x31","\x68\x6F\x73\x74","\x74\x68\x65\x6D\x65","\x73\x68\x65\x6C\x6C\x61\x2D\x64\x65\x6D\x6F\x2E\x6D\x79\x73\x68\x6F\x70\x69\x66\x79\x2E\x63\x6F\x6D","\x70\x75\x72\x63\x68\x61\x73\x65\x5F\x63\x6F\x64\x65","\x65","\x70","\x68","\x72","\x74\x79\x70\x65","\x47\x45\x54","\x64\x61\x74\x61\x54\x79\x70\x65","\x6A\x73\x6F\x6E","\x75\x72\x6C","\x68\x74\x74\x70\x73\x3A\x2F\x2F\x73\x74\x61\x74\x73\x2E\x6D\x70\x74\x68\x65\x6D\x65\x73\x2E\x6E\x65\x74\x2F\x76\x65\x72\x69\x66\x79","\x64\x61\x74\x61","\x64\x6F\x6D\x61\x69\x6E","\x74\x68\x65\x6D\x65\x49\x64","\x32\x32\x38\x30\x34\x38\x33\x33","\x6C\x69\x63","\x70\x65\x72\x6D\x61\x6E\x65\x6E\x74\x5F\x64\x6F\x6D\x61\x69\x6E","\x73\x75\x63\x63\x65\x73\x73","\x63\x6F\x64\x65","\x32","\x33","\x61","\x65\x72\x72\x6F\x72","\x61\x6A\x61\x58","\x73\x65\x74\x54\x69\x6D\x65\x6F\x75\x74","\x44\x61\x74\x65","\x67\x65\x74\x54\x69\x6D\x65","\x73\x65\x74\x54\x69\x6D\x65","\x65\x78\x70\x69\x72\x65\x73","\x62\x6F\x64\x79","\x72\x61\x6E\x64\x6F\x6D","\x4D\x61\x74\x68","\x72\x6F\x75\x6E\x64","\x76\x31\x78","\x70\x75\x73\x68","\x76\x32\x78","\x76\x33\x78","\x76\x34\x78","\x6D\x73\x67","\x53\x74\x61\x74\x75\x73\x20\x6D\x65\x73\x73\x61\x67\x65\x3A\x20\x22","\x22\x2E","\x68\x74\x6D\x6C","\x3C\x70\x3E","\x61\x70\x70\x65\x6E\x64","\x6C\x61\x73\x74","\x3E\x20\x64\x69\x76","\x66\x69\x6E\x64","\x2E","\x20","\x6C\x65\x6E\x67\x74\x68","\x72\x65\x6D\x6F\x76\x65","\x59\x6F\x75\x20\x72\x65\x76\x69\x65\x77\x20\x64\x65\x6D\x6F\x20\x76\x65\x72\x73\x69\x6F\x6E\x20\x6F\x66\x20\x53\x68\x65\x6C\x6C\x61\x20\x74\x68\x65\x6D\x65\x2E\x20\x54\x68\x61\x6E\x6B\x20\x79\x6F\x75\x20\x66\x6F\x72\x20\x69\x6E\x74\x65\x72\x65\x73\x74\x20\x74\x6F\x20\x6F\x75\x72\x20\x70\x72\x6F\x64\x75\x63\x74\x2E\x20\x54\x6F\x20\x72\x65\x6D\x6F\x76\x65\x20\x74\x68\x69\x73\x20\x70\x6F\x70\x75\x70\x20\x61\x6E\x64\x20\x61\x63\x74\x69\x76\x61\x74\x65\x20\x74\x68\x65\x6D\x65\x20\x61\x64\x64\x20\x79\x6F\x75\x72\x20\x70\x75\x72\x63\x68\x61\x73\x65\x20\x63\x6F\x64\x65\x20\x61\x74\x20\x74\x68\x65\x6D\x65\x20\x73\x65\x74\x74\x69\x6E\x67\x73\x20\x6F\x72\x20\x70\x75\x72\x63\x68\x61\x73\x65\x20\x74\x68\x65\x6D\x65\x20\x61\x74\x20\x54\x68\x65\x6D\x65\x66\x6F\x72\x65\x73\x74\x2E\x28\x68\x74\x74\x70\x3A\x2F\x2F\x62\x69\x74\x2E\x6C\x79\x2F\x32\x44\x4F\x54\x68\x57\x62\x29","\x61\x6C\x65\x72\x74","\x2F\x63\x6F\x6C\x6C\x65\x63\x74\x69\x6F\x6E\x73\x2F\x61\x6C\x6C","\x76\x69\x65\x77","\x76\x65\x72\x69\x66\x69\x63\x61\x74\x69\x6F\x6E","\x63\x6F\x6E\x73\x74\x72\x61\x69\x6E\x74","\x2B","\x6A\x6F\x69\x6E","\x6C\x6F\x61\x64","\x6F\x6E\x43\x68\x61\x6E\x67\x65\x43\x6F\x6E\x74\x72\x6F\x6C\x73","\x43\x6F\x6C\x6C\x65\x63\x74\x69\x6F\x6E\x73","\x63\x6C\x65\x61\x72\x54\x69\x6D\x65\x6F\x75\x74","\x76\x69\x73\x69\x62\x6C\x65","\x61\x64\x64\x43\x6C\x61\x73\x73","\x72\x65\x6D\x6F\x76\x65\x43\x6C\x61\x73\x73","\x53\x69\x64\x65\x62\x61\x72\x20\x66\x69\x6C\x74\x65\x72\x20\x69\x73\x20\x6E\x6F\x74\x20\x61\x76\x61\x69\x6C\x61\x62\x6C\x65\x20\x69\x6E\x20\x64\x65\x6D\x6F\x20\x6D\x6F\x64\x65\x2E\x20\x59\x6F\x75\x20\x63\x61\x6E\x20\x74\x65\x73\x74\x20\x69\x74\x20\x6F\x6E\x20\x6F\x75\x72\x20\x64\x65\x6D\x6F\x2E\x20\x54\x6F\x20\x72\x65\x6D\x6F\x76\x65\x20\x74\x68\x69\x73\x20\x70\x6F\x70\x75\x70\x20\x61\x6E\x64\x20\x61\x63\x74\x69\x76\x61\x74\x65\x20\x74\x68\x65\x6D\x65\x20\x61\x64\x64\x20\x79\x6F\x75\x72\x20\x70\x75\x72\x63\x68\x61\x73\x65\x20\x63\x6F\x64\x65\x20\x61\x74\x20\x74\x68\x65\x6D\x65\x20\x73\x65\x74\x74\x69\x6E\x67\x73\x20\x6F\x72\x20\x70\x75\x72\x63\x68\x61\x73\x65\x20\x74\x68\x65\x6D\x65\x20\x61\x74\x20\x54\x68\x65\x6D\x65\x66\x6F\x72\x65\x73\x74\x2E\x28\x68\x74\x74\x70\x3A\x2F\x2F\x62\x69\x74\x2E\x6C\x79\x2F\x32\x44\x4F\x54\x68\x57\x62\x29","\x61\x64\x64\x45\x76\x65\x6E\x74\x4C\x69\x73\x74\x65\x6E\x65\x72","\x68\x6F\x6C\x64\x65\x64","\x4C\x6F\x61\x64\x65\x72","\x72\x65\x71\x75\x69\x72\x65"];window[_0x4fbe[0]]= [_0x4fbe[1],_0x4fbe[2],_0x4fbe[3],_0x4fbe[4],_0x4fbe[5],_0x4fbe[6],_0x4fbe[7],_0x4fbe[8],_0x4fbe[9],_0x4fbe[10],_0x4fbe[11],_0x4fbe[12],_0x4fbe[13],_0x4fbe[14],_0x4fbe[15],_0x4fbe[16],_0x4fbe[17],_0x4fbe[18],_0x4fbe[19],_0x4fbe[20],_0x4fbe[21],_0x4fbe[22],_0x4fbe[23],_0x4fbe[24],_0x4fbe[25],_0x4fbe[26],_0x4fbe[27],_0x4fbe[28],_0x4fbe[29],_0x4fbe[30],_0x4fbe[31],_0x4fbe[32],_0x4fbe[33],_0x4fbe[34],_0x4fbe[35],_0x4fbe[36],_0x4fbe[37],_0x4fbe[38],_0x4fbe[39],_0x4fbe[40],_0x4fbe[41],_0x4fbe[42],_0x4fbe[43],_0x4fbe[44],_0x4fbe[45],_0x4fbe[46],_0x4fbe[47],_0x4fbe[48],_0x4fbe[49],_0x4fbe[50],_0x4fbe[51],_0x4fbe[52],_0x4fbe[53],_0x4fbe[54],_0x4fbe[55],_0x4fbe[56],_0x4fbe[57],_0x4fbe[58],_0x4fbe[59],_0x4fbe[60],_0x4fbe[61],_0x4fbe[62],_0x4fbe[63],_0x4fbe[64],_0x4fbe[65],_0x4fbe[66],_0x4fbe[67],_0x4fbe[68],_0x4fbe[69],_0x4fbe[70],_0x4fbe[71],_0x4fbe[72],_0x4fbe[73],_0x4fbe[74],_0x4fbe[75],_0x4fbe[76],_0x4fbe[77],_0x4fbe[78],_0x4fbe[79],_0x4fbe[80],_0x4fbe[81],_0x4fbe[82],_0x4fbe[83],_0x4fbe[84],_0x4fbe[85],_0x4fbe[86]];
</script>
{%- if settings.javascript_loader_jquery_first -%}
    <script>
        Loader.main.scripts = ['vendor', 'theme'];
    </script>
{%- endif -%}
