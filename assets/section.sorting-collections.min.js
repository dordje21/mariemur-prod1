theme.SortingCollections = function () {
    function t(t) {
        this.$container = $(t), this.namespace = ".sorting-collections", this.onLoad()
    }

    return t.prototype = $.extend({}, Section.prototype, t.prototype, {
        onLoad: function () {
            var t = this.$container.find("[data-sorting-collections-control]"),
                e = this.$container.find("[data-sorting-collections-items]"), o = null;
            this.$control = t, t.on("click", "a", function (n) {
                var a = $(this);
                if (!a.hasClass("active")) {
                    o && o.abort(), theme.Loader.set(e);
                    var i = a.attr("data-collection");
                    o = $.ajax({
                        type: "GET",
                        url: "/collections/" + i,
                        cache: !1,
                        data: {
                            view: "sorting",
                            constraint: "limit=" + e.attr("data-limit") + "+grid=" + encodeURIComponent(e.attr("data-grid"))
                        },
                        dataType: "html",
                        success: function (n) {
                            e.html(n), theme.ImagesLazyLoad.update(), theme.ProductReview.update(), t.find("a").removeClass("active"), a.addClass("active"), theme.Loader.unset(e), o = null
                        }
                    })
                }
                return n.preventDefault(), !1
            }), theme.is_loaded && (theme.ImagesLazyLoad.update(), theme.ProductReview.update())
        }, onUnload: function () {
            this.$container.off(this.namespace), this.$control.off()
        }
    }), t
}(), $(function () {
    theme.sections.register("sorting-collections", theme.SortingCollections)
});